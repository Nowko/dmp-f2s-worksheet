<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DMP — 욕망 해소 자금 산출 워크시트 (Step1)</title>
  <style>
    :root{
      --bg:#0b1020; --card:#131a33; --muted:#9fb0ff; --text:#e9edff;
      --accent:#7ea7ff; --ok:#7effb6; --border:rgba(255,255,255,.12);
    }
    *{ box-sizing:border-box; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Apple SD Gothic Neo','Noto Sans KR','Malgun Gothic',Arial,sans-serif; }
    body{ margin:0; background:linear-gradient(180deg,#0b1020,#0b1020 50%,#0f1530); color:var(--text); }
    .wrap{ max-width:980px; margin:32px auto; padding:0 16px; }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,.25); }
    .section-title{ font-weight:800; font-size:18px; margin-bottom:8px; }
    .pill{ display:inline-block; padding:4px 10px; border-radius:999px; background:rgba(126,167,255,.12); color:var(--accent); font-weight:700; font-size:12px; margin-left:8px; }
    .hr{ border-top:1px dashed rgba(255,255,255,.15); margin:14px 0; }
    .muted{ color:#b7c4ff; opacity:.85; font-size:14px; }
    .title-line{ font-size:20px; font-weight:800; margin:0 0 12px; }

    /* 2열 그리드 */
    .grid{ display:grid; grid-template-columns:minmax(300px,1fr) minmax(300px,1fr); gap:12px 24px; }

    /* 한 줄(라벨-값-단위) — 우측 붙임 */
    .row{ display:flex; align-items:center; justify-content:flex-end; gap:6px; margin:8px 0; width:100%; }
    .row > label{ color:#c9d4ff; font-size:14px; white-space:nowrap; text-align:right; margin-right:6px; }
    .k{ margin-left:4px; white-space:nowrap; opacity:.95; }

    /* 입력/결과 필드 */
    input[type="number"], input[readonly]{
      width:120px; padding:9px 12px; border-radius:10px; border:1px solid var(--border);
      text-align:right; color:var(--text); background:rgba(126,167,255,.10);
      font-variant-numeric:tabular-nums; outline:none;
    }
    input[type="number"]:focus{ outline:2px solid var(--accent); box-shadow:0 0 0 4px rgba(126,167,255,.15); }
    /* 결과(읽기전용)는 녹색 톤 */
    input[readonly]{ background:rgba(126,255,182,.10); border-color:rgba(126,255,182,.45); }
    input.result{ width:140px; font-weight:800; }

    /* 긴 문구 라벨은 좌측, 값은 우측 */
    .row.longlabel{ justify-content:space-between; }

    @media (max-width:760px){
      .grid{ grid-template-columns:1fr; }
      input[type="number"], input[readonly]{ width:110px; }
      input.result{ width:125px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="title-line">1단계: 현금흐름 <span class="pill">F2S</span></div>

      <div class="row">
        <label>세후 소득</label>
        <input type="number" id="income" step="0.1" min="0" placeholder="예: 280">
        <div class="k">만원/월</div>
      </div>

      <div class="hr"></div>
      <div class="muted"><b>필수 생활비</b></div>
      <div class="grid">
        <div class="row"><label>주거비</label><input type="number" id="rent" step="0.1" min="0" placeholder="예: 70"><div class="k">만원</div></div>
        <div class="row"><label>교통비</label><input type="number" id="transport" step="0.1" min="0" placeholder="예: 15"><div class="k">만원</div></div>
        <div class="row"><label>식비(최소 필요)</label><input type="number" id="food" step="0.1" min="0" placeholder="예: 50"><div class="k">만원</div></div>
        <div class="row"><label>통신비+보험료</label><input type="number" id="telIns" step="0.1" min="0" placeholder="예: 20"><div class="k">만원</div></div>
        <div class="row"><label>기타 고정비(공과금 등)</label><input type="number" id="others" step="0.1" min="0" placeholder="예: 25"><div class="k">만원</div></div>
      </div>

      <div class="row"><label class="muted">필수 생활비 합계</label><input type="number" id="mustSum" readonly><div class="k">만원</div></div>

      <div class="hr"></div>
      <div class="muted"><b>안전망 지출</b></div>
      <div class="grid">
        <div class="row"><label>비상자금 적립</label><input type="number" id="emFund" step="0.1" min="0" placeholder="예: 30"><div class="k">만원</div></div>
        <div class="row"><label>부채 상환(원리금)</label><input type="number" id="debtPay" step="0.1" min="0" placeholder="예: 25"><div class="k">만원</div></div>
        <div class="row"><label>최소 미래 저축</label><input type="number" id="futureSav" step="0.1" min="0" placeholder="예: 0~40"><div class="k">만원</div></div>
      </div>

      <div class="row"><label class="muted">안전망 지출 합계</label><input type="number" id="safetySum" readonly><div class="k">만원</div></div>

      <div class="hr"></div>
      <div class="row longlabel">
        <label class="result">F2S-흐름 = 세후 소득 − (필수 + 안전망)</label>
        <input class="result" id="flowF2S" readonly>
        <div class="k result">만원/월</div>
      </div>

      <div id="message" class="muted" style="margin-top:8px;"></div>
    </div>
  </div>

  <script>
    (function(){
      const $  = id => document.getElementById(id);
      const num = v => (isFinite(parseFloat(v)) ? parseFloat(v) : 0);
      const r1 = v => (Math.round((v ?? 0) * 10) / 10).toFixed(1);

      // 계산 함수
      function calc(){
        const income = num($('income').value);

        const must = num($('rent').value)
                   + num($('transport').value)
                   + num($('food').value)
                   + num($('telIns').value)
                   + num($('others').value);
        $('mustSum').value = r1(must);

        const safety = num($('emFund').value)
                     + num($('debtPay').value)
                     + num($('futureSav').value);
        $('safetySum').value = r1(safety);

        const flow = income - must - safety;
        $('flowF2S').value = r1(flow);

        $('message').textContent = '계산 완료! 입력을 바꾸면 실시간으로 다시 계산됩니다.';
      }

      // 초기 예제값(placeholder가 아니라 실제 value로 세팅)
      function setDefaults(){
        const defaults = {
          income:280, rent:70, transport:15, food:50, telIns:20, others:25,
          emFund:30, debtPay:25, futureSav:0
        };
        Object.entries(defaults).forEach(([id, val])=>{
          if ($(id)) $(id).value = val;
        });
      }

      function wire(){
        ['income','rent','transport','food','telIns','others','emFund','debtPay','futureSav']
          .forEach(id => $(id).addEventListener('input', calc));
      }

      // 시작
      document.addEventListener('DOMContentLoaded', ()=>{
        setDefaults();   // 예제값 주입
        wire();          // 실시간 계산 연결
        calc();          // 즉시 계산 표시
      });
    })();
  </script>
</body>
</html>
